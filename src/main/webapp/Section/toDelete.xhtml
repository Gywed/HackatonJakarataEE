<!DOCTYPE html>

<html xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:p="http://primefaces.org/ui" 
  xmlns:pt="http://xmlns.jcp.org/jsf/passthrough" xmlns:f = "http://java.sun.com/jsf/core">
<h:head>

<title>Sections</title>
<meta http-equiv="  Content-Type" content="text/html; charset=UTF-8"/>
</h:head>
<body>
	<h1>Liste des sections</h1>
	<p:commandButton value="Ajouter"  onclick="PF('createDialog').show()" />
	
	<h:form>
		<p:dataTable value = "#{sectionControl.doFindAll()}" var = "section">
		   <p:column>    				
		      <f:facet name = "header">Id</f:facet>    				
		      #{section.id}
		   </p:column>
		   
		   <p:column>
		      <f:facet name = "header">Nom</f:facet>
		      #{section.nom}
		   </p:column>
		   
		   <p:column>
		      <f:facet name = "header">Departement</f:facet>
		      #{section.departement.nom}
		   </p:column>
		   
		  
			<p:column>
			    <f:facet name="header">Modifier</f:facet>
			    <p:commandButton value="Modifier" action="#{sectionControl.goToUpdateSection(section)}" onclick="PF('updateDialog').show()" />
			</p:column>
		</p:dataTable>
		
	</h:form>
	
	<!-- pop up modifier une section -->
	<p:dialog id="updateDialog" header="Modification" widgetVar="updateDialog" modal="true">
		<h:form id="updateForm">
	        <h:panelGrid columns="2" cellpadding="5">
	            <h:outputLabel for="nom" value="Nom :" />
	            <p:inputText id="nom" value="#{sectionControl.selectedSection.nom}" />
	            <p:selectOneMenu id="departement" value="#{sectionControl.newSection.departement}">     
	                <f:selectItems value="#{departementControl.doFindAll()}" var="departement"
	                              itemLabel="#{departement.nom}" itemValue="#{departement}" />
	            </p:selectOneMenu>
	        </h:panelGrid>
	        <p:commandButton value="Enregistrer" action="#{sectionControl.doUpdateSection()}" oncomplete="PF('updateDialog').hide()" />
	    </h:form>
	    
	</p:dialog>
	
	<!--  pop up ajouter une section -->
    <p:dialog id="createDialog" header="Ajout" widgetVar="createDialog" modal="true">
	    <h:form id="createForm">
	        <h:panelGrid columns="2" cellpadding="5">
	            <h:outputLabel for="nom" value="Nom :" />
	            <p:inputText id="nom" value="#{sectionControl.newSection.nom}" />
	            <h:outputLabel for="departement" value="Departement :" />
	            <p:selectOneMenu id="departement" value="#{sectionControl.newSection.departement}">
	                <f:selectItem itemLabel="Veuillez selectionner un dÃ©partement" itemValue="" />
	                
	                <f:selectItems value="#{departementControl.doFindAll()}" var="departement"
	                              itemLabel="#{departement.nom}" itemValue="#{departement}" />
	                
	            </p:selectOneMenu>
	        </h:panelGrid>
	        <p:commandButton value="Enregistrer" action="#{sectionControl.doAdd()}" oncomplete="PF('createDialog').hide()" />
	    </h:form>
	</p:dialog>
    
</body>
</html>
